library(httr)
library(dplyr)
mpls = "https://www.redfin.com/stingray/api/gis-csv?al=1&market=twincities&min_stories=1&num_homes=350&ord=days-on-redfin-asc&page_number=1&region_id=10943&region_type=6&sf=1,2,5,6,7&status=9&uipt=1,4&v=8"
DateForDF = Sys.Date()
DateForFile = format(Sys.Date(), "%Y%m%d")
ExcelFileDate <- paste0(DateForFile, "HousingData")
r <- GET(
mpls,
add_headers(Name = "DomesticLyfe"),
set_cookies("MeWant" = "cookies")
)
HousingData <- content(r)
HousingData %>%
mutate(
date_collected = DateForDF
) -> HousingDataProcessed
write.csv(
HousingDataProcessed,
paste0("./output/", ExcelFileDate, ".xlsx"))
write.csv(
HousingDataProcessed,
paste0("./output/", ExcelFileDate, ".csv"))
GetHousingData <-function(url){
require(dplyr)
require(httr)
DateForDF = Sys.Date()
DateForFile = format(Sys.Date(), "%Y%m%d")
ExcelFileDate <- paste0(DateForFile, "HousingData")
r <- GET(
url,
add_headers(Name = "DomesticLyfe"),
set_cookies("MeWant" = "cookies")
)
HousingData <- content(r)
HousingData %>%
mutate(
date_collected = DateForDF
) -> HousingDataProcessed
write.csv(
HousingDataProcessed,
paste0("./output/", ExcelFileDate, ".csv"))
return(HousingDataProcessed)
}
mpls = "https://www.redfin.com/stingray/api/gis-csv?al=1&market=twincities&min_stories=1&num_homes=350&ord=days-on-redfin-asc&page_number=1&region_id=10943&region_type=6&sf=1,2,5,6,7&status=9&uipt=1,4&v=8"
GetHousingData <-function(url){
require(dplyr)
require(httr)
DateForDF = Sys.Date()
DateForFile = format(Sys.Date(), "%Y%m%d")
ExcelFileDate <- paste0(DateForFile, "HousingData")
r <- GET(
url,
add_headers(Name = "DomesticLyfe"),
set_cookies("MeWant" = "cookies")
)
HousingData <- content(r)
HousingData %>%
mutate(
date_collected = DateForDF
) -> HousingDataProcessed
write.csv(
HousingDataProcessed,
paste0("./output/", ExcelFileDate, ".csv"))
return(HousingDataProcessed)
}
GetHousingData(mpls)
mplsdata <- GetHousingData(mpls)
View(mplsdata)
View(mplsdata)
DateForDF = Sys.Date()
DateForFile = format(Sys.Date(), "%Y%m%d")
ExcelFileDate <- paste0(DateForFile, "HousingData")
View(mplsdata)
View(mplsdata)
glimpse(mplsdata)
View(mplsdata)
mplsdata[1]
mplsdata[,1]
mplsdata[1,]
treats<-mplsdata[1,]
View(treats)
as.list(treats)
